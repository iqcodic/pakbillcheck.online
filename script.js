// PakBillCheck - Complete JavaScript Functionality

// Blog posts data with SEO optimized content
const blogPosts = {
    1: {
        title: "Understanding Your FESCO Electricity Bill - Complete Guide",
        author: "PakBillCheck Expert Team",
        date: "January 15, 2024",
        image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600",
        description: "Complete guide to understanding your FESCO electricity bill, tariff rates, and billing components in Pakistan",
        content: `
            <h2>What is FESCO?</h2>
            <p>Faisalabad Electric Supply Company (FESCO) is one of the major electricity distribution companies in Pakistan, serving millions of customers across Punjab province including Faisalabad, Sargodha, Jhang, Chiniot, Toba Tek Singh, and Khushab districts.</p>
            
            <h2>Understanding Your FESCO Bill Components</h2>
            <p>Your FESCO electricity bill contains several important components that you should understand:</p>
            <ul>
                <li><strong>Consumer Number:</strong> Your unique 14-digit customer identification number</li>
                <li><strong>Reference Number:</strong> Used for online bill checking and payments</li>
                <li><strong>Billing Period:</strong> The month for which you're being charged</li>
                <li><strong>Units Consumed (kWh):</strong> The amount of electricity you used</li>
                <li><strong>Tariff Rate:</strong> The rate at which you're charged per unit</li>
                <li><strong>Current Charges:</strong> This month's electricity cost</li>
                <li><strong>Arrears:</strong> Any previous unpaid amounts</li>
                <li><strong>Total Amount:</strong> The final amount you need to pay</li>
            </ul>
            
            <h2>FESCO Tariff Categories in Pakistan</h2>
            <p>FESCO offers different electricity tariff rates for various customer types:</p>
            <ul>
                <li><strong>Residential customers:</strong> Slab-based pricing for home users</li>
                <li><strong>Commercial establishments:</strong> Fixed rates for shops and offices</li>
                <li><strong>Industrial consumers:</strong> Special rates for factories and manufacturing</li>
                <li><strong>Agricultural users:</strong> Subsidized rates for farming and irrigation</li>
            </ul>
            
            <h2>How to Check Your FESCO Bill Online</h2>
            <p>You can easily check your FESCO bill online using PakBillCheck service:</p>
            <ol>
                <li>Find your bill reference number on your physical bill</li>
                <li>Enter the reference number in our bill checker</li>
                <li>Click "Check Bill" to get instant access</li>
                <li>View complete bill details including payment due date</li>
            </ol>
            
            <h2>FESCO Payment Methods</h2>
            <p>Pay your FESCO electricity bill through various convenient methods:</p>
            <ul>
                <li>Online banking (HBL, MCB, UBL, Allied Bank)</li>
                <li>Mobile wallets (JazzCash, Easypaisa)</li>
                <li>FESCO customer service centers</li>
                <li>Authorized bill payment centers</li>
            </ul>
        `
    },
    2: {
        title: "How to Pay Your FESCO Electricity Bill Online in Pakistan",
        author: "Digital Payment Specialist",
        date: "January 10, 2024", 
        image: "https://images.unsplash.com/photo-1563013544-824ae1b704d3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600",
        description: "Step-by-step guide to paying FESCO electricity bills online through banks and mobile wallets in Pakistan",
        content: `
            <h2>Online Payment Methods for FESCO Bills</h2>
            <p>Pakistan's digital payment infrastructure has revolutionized how customers pay their FESCO electricity bills. Here are the most reliable and secure online payment methods available:</p>
            
            <h2>Major Pakistani Bank Online Services</h2>
            <p>All major banks in Pakistan offer convenient online bill payment services for FESCO customers:</p>
            <ul>
                <li><strong>HBL Digital Banking:</strong> Pay bills through HBL Mobile and Internet Banking</li>
                <li><strong>Allied Bank Online:</strong> Secure bill payments via Allied Digital App</li>
                <li><strong>MCB Bank Internet Banking:</strong> Easy bill payments through MCB Connect</li>
                <li><strong>UBL Omni:</strong> Multiple payment channels including mobile app</li>
                <li><strong>Standard Chartered Online Banking:</strong> Premium digital banking services</li>
                <li><strong>Bank Alfalah:</strong> Alfa Digital App for quick bill payments</li>
                <li><strong>Habib Metro Bank:</strong> Online banking with bill payment facility</li>
            </ul>
            
            <h2>Popular Mobile Wallet Services in Pakistan</h2>
            <p>Mobile wallets offer the quickest way to pay FESCO bills:</p>
            <ul>
                <li><strong>JazzCash:</strong> Pakistan's leading mobile wallet service</li>
                <li><strong>Easypaisa:</strong> Telenor's popular digital payment platform</li>
                <li><strong>SadaPay:</strong> Modern digital banking solution</li>
                <li><strong>NayaPay:</strong> Innovative mobile payment app</li>
                <li><strong>Bank Alfalah's Alfa Wallet:</strong> Digital wallet with bill payment</li>
            </ul>
            
            <h2>Third-Party Bill Payment Platforms</h2>
            <p>Specialized platforms for utility bill payments in Pakistan:</p>
            <ul>
                <li><strong>1BILL:</strong> All-in-one bill payment platform</li>
                <li><strong>eBill.pk:</strong> Comprehensive utility bill service</li>
                <li><strong>Bill Avenue:</strong> Multi-utility payment portal</li>
                <li><strong>PayPak:</strong> Government-backed payment system</li>
            </ul>
            
            <h2>Step-by-Step Payment Process</h2>
            <p>Follow these simple steps to pay your FESCO bill online:</p>
            <ol>
                <li>Choose your preferred payment method (bank app or mobile wallet)</li>
                <li>Select "Bill Payment" or "Utility Bills" option</li>
                <li>Find and select "FESCO" from the company list</li>
                <li>Enter your FESCO consumer number or reference number</li>
                <li>Verify the bill amount and due date</li>
                <li>Select your payment source (bank account or wallet)</li>
                <li>Confirm the payment and save the receipt</li>
            </ol>
            
            <h2>Security Tips for Online Bill Payments</h2>
            <ul>
                <li><strong>Use official apps only:</strong> Download from Google Play Store or App Store</li>
                <li><strong>Check HTTPS encryption:</strong> Ensure secure connection</li>
                <li><strong>Keep receipts:</strong> Save payment confirmations</li>
                <li><strong>Monitor statements:</strong> Check bank accounts regularly</li>
                <li><strong>Use secure networks:</strong> Avoid public Wi-Fi for payments</li>
                <li><strong>Enable notifications:</strong> Get SMS alerts for transactions</li>
            </ul>
            
            <h2>Benefits of Online FESCO Bill Payments</h2>
            <ul>
                <li>24/7 availability from anywhere in Pakistan</li>
                <li>Instant payment confirmation</li>
                <li>No need to visit physical locations</li>
                <li>Digital receipts for record keeping</li>
                <li>Reduced risk of late payment fees</li>
                <li>Environment-friendly paperless transactions</li>
            </ul>
        `
    },
    3: {
        title: "Energy Saving Tips for Pakistani Households - Reduce Your FESCO Bill",
        author: "Energy Conservation Expert",
        date: "January 5, 2024",
        image: "https://images.unsplash.com/photo-1621905252507-b35492cc74b4?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600",
        description: "Practical energy saving tips to reduce electricity consumption and lower your monthly FESCO bill in Pakistan",
        content: `
            <h2>Why Energy Conservation Matters in Pakistan</h2>
            <p>With rising electricity costs across Pakistan and frequent load shedding issues, energy conservation has become crucial for every household. By reducing your electricity consumption, you can significantly lower your monthly FESCO bills while contributing to Pakistan's energy sustainability.</p>
            
            <h2>Air Conditioning Efficiency Tips for Pakistani Climate</h2>
            <p>Air conditioning accounts for 60-70% of electricity bills in Pakistani households during summer months:</p>
            <ul>
                <li><strong>Optimal temperature:</strong> Set your AC to 24-26°C for maximum efficiency</li>
                <li><strong>Use ceiling fans:</strong> Combine AC with fans to feel 3-4°C cooler</li>
                <li><strong>Block sunlight:</strong> Use thick curtains during peak sun hours (11 AM - 4 PM)</li>
                <li><strong>Proper insulation:</strong> Seal gaps in doors and windows</li>
                <li><strong>Regular maintenance:</strong> Clean AC filters monthly</li>
                <li><strong>Inverter technology:</strong> Use inverter ACs that consume 40% less electricity</li>
                <li><strong>Room-specific cooling:</strong> Only cool rooms currently in use</li>
            </ul>
            
            <h2>Lighting Solutions for Pakistani Homes</h2>
            <ul>
                <li><strong>LED bulbs:</strong> Replace all incandescent and CFL bulbs with LED</li>
                <li><strong>Natural light:</strong> Use daylight during morning and afternoon</li>
                <li><strong>Motion sensors:</strong> Install in corridors and outdoor areas</li>
                <li><strong>Task lighting:</strong> Use focused lighting instead of room lighting</li>
                <li><strong>Timer switches:</strong> Automatically turn off lights at specific times</li>
            </ul>
            
            <h2>Kitchen and Appliance Management</h2>
            <ul>
                <li><strong>Refrigerator settings:</strong> Keep temperature at 3-4°C for optimal efficiency</li>
                <li><strong>Cooking efficiency:</strong> Use pressure cookers and induction stoves</li>
                <li><strong>Water heating:</strong> Use solar water heaters where possible</li>
                <li><strong>Washing machines:</strong> Use cold water settings and full loads</li>
                <li><strong>Iron efficiently:</strong> Iron multiple clothes at once</li>
                <li><strong>Microwave vs oven:</strong> Use microwave for reheating (75% less energy)</li>
            </ul>
            
            <h2>Smart Home Solutions for Pakistan</h2>
            <ul>
                <li><strong>Smart plugs:</strong> Monitor and control device usage remotely</li>
                <li><strong>Programmable thermostats:</strong> Automatically adjust AC temperatures</li>
                <li><strong>Smart meters:</strong> Track real-time electricity consumption</li>
                <li><strong>Home automation:</strong> Schedule devices to operate during off-peak hours</li>
            </ul>
            
            <h2>Solar Energy Solutions in Pakistan</h2>
            <p>Pakistan receives abundant sunlight year-round, making solar energy highly viable:</p>
            <ul>
                <li><strong>Rooftop solar panels:</strong> Can reduce bills by 50-90%</li>
                <li><strong>Solar water heaters:</strong> Eliminate electric geyser usage</li>
                <li><strong>Solar-powered fans:</strong> Reduce daytime electricity consumption</li>
                <li><strong>Government incentives:</strong> Take advantage of net metering policies</li>
                <li><strong>Battery storage:</strong> Store solar energy for nighttime use</li>
            </ul>
            
            <h2>Load Management During Peak Hours</h2>
            <p>FESCO charges higher rates during peak hours (6 PM - 11 PM):</p>
            <ul>
                <li>Avoid using washing machines and dishwashers during peak hours</li>
                <li>Charge devices and gadgets during off-peak times</li>
                <li>Cook meals before or after peak hours when possible</li>
                <li>Use timers to run pool pumps and water heaters at night</li>
            </ul>
            
            <h2>Monthly Energy Audit Checklist</h2>
            <ul>
                <li>Check all electrical connections for loose wires (causes energy wastage)</li>
                <li>Clean AC coils and replace filters</li>
                <li>Inspect door seals on refrigerators and freezers</li>
                <li>Review your FESCO bill for unusual consumption spikes</li>
                <li>Update to energy-efficient appliances with 5-star ratings</li>
            </ul>
            
            <h2>Expected Savings</h2>
            <p>By implementing these energy conservation measures, Pakistani households can typically reduce their FESCO electricity bills by:</p>
            <ul>
                <li>20-30% through efficient AC usage</li>
                <li>10-15% through LED lighting conversion</li>
                <li>15-20% through proper appliance management</li>
                <li>50-90% through solar panel installation</li>
            </ul>
        `
    }
};

// Current page and theme state
let currentPage = 'home';
let currentTheme = 'light';

// Theme toggle functionality
function toggleTheme() {
    const body = document.body;
    const themeIcon = document.getElementById('theme-icon');
    const mobileThemeIcon = document.getElementById('mobile-theme-icon');
    
    if (currentTheme === 'light') {
        body.setAttribute('data-theme', 'dark');
        currentTheme = 'dark';
        if (themeIcon) themeIcon.className = 'fas fa-sun';
        if (mobileThemeIcon) mobileThemeIcon.className = 'fas fa-sun';
        localStorage.setItem('theme', 'dark');
    } else {
        body.removeAttribute('data-theme');
        currentTheme = 'light';
        if (themeIcon) themeIcon.className = 'fas fa-moon';
        if (mobileThemeIcon) mobileThemeIcon.className = 'fas fa-moon';
        localStorage.setItem('theme', 'light');
    }
}

// Load saved theme
function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    const body = document.body;
    const themeIcon = document.getElementById('theme-icon');
    const mobileThemeIcon = document.getElementById('mobile-theme-icon');
    
    if (savedTheme === 'dark') {
        body.setAttribute('data-theme', 'dark');
        currentTheme = 'dark';
        if (themeIcon) themeIcon.className = 'fas fa-sun';
        if (mobileThemeIcon) mobileThemeIcon.className = 'fas fa-sun';
    } else {
        currentTheme = 'light';
        if (themeIcon) themeIcon.className = 'fas fa-moon';
        if (mobileThemeIcon) mobileThemeIcon.className = 'fas fa-moon';
    }
}

// SEO function to update page titles and meta descriptions
function setSeoForPage(pageId) {
    const titles = {
        home: 'PakBillCheck - FESCO Bill Checker | Check Your Electricity Bill Instantly',
        blog: 'Utility Blog - Expert Tips & Insights | PakBillCheck',
        'blog-post': 'Blog Article | PakBillCheck',
        districts: 'FESCO Districts Information | PakBillCheck',
        fesco: 'FESCO - Faisalabad Electric Supply Company | PakBillCheck',
        help: 'Help Center - Frequently Asked Questions | PakBillCheck',
        privacy: 'Privacy Policy | PakBillCheck',
        contact: 'Contact Us | PakBillCheck'
    };
    
    const descriptions = {
        home: 'Check your FESCO electricity bill quickly using your bill reference number. Fast, secure, and reliable bill checking service for Pakistan.',
        blog: 'Latest articles, tips, and guides about electricity billing, energy saving, and utility management in Pakistan.',
        'blog-post': 'Expert insights and guides about electricity, billing, and energy management in Pakistan.',
        districts: 'Complete information about districts served by Faisalabad Electric Supply Company (FESCO) in Pakistan.',
        fesco: 'Detailed information about Faisalabad Electric Supply Company (FESCO) - services, districts, and bill checking.',
        help: 'Get help, support and frequently asked questions about FESCO bill checking and our services.',
        privacy: 'Privacy policy explaining how PakBillCheck protects your information and handles data securely.',
        contact: 'Contact PakBillCheck for support, questions, or feedback about our FESCO bill checking services.'
    };
    
    document.title = titles[pageId] || 'PakBillCheck - FESCO Bill Checker';
    
    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc) {
        metaDesc.setAttribute('content', descriptions[pageId] || 'PakBillCheck - FESCO Bill Checker');
    }
}

// Page navigation function
function showPage(pageId) {
    // Hide all pages
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => {
        page.style.display = 'none';
        page.classList.add('hidden');
    });
    
    // Show selected page
    const targetPage = document.getElementById('page-' + pageId);
    if (targetPage) {
        targetPage.style.display = 'block';
        targetPage.classList.remove('hidden');
    }
    
    // Update navigation
    updateNavigation(pageId);
    
    // Update current page state
    currentPage = pageId;
    
    // Update SEO for page
    setSeoForPage(pageId);
    
    // Scroll to top
    scrollToTop();
    
    // Close mobile menu if open
    closeMobileMenu();
}

// Update navigation active states
function updateNavigation(activePageId) {
    // Remove active class from all nav links
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        link.classList.remove('active');
    });
    
    // Add active class to current page nav
    const desktopLinks = document.querySelectorAll('.desktop-nav .nav-link');
    const mobileLinks = document.querySelectorAll('.mobile-menu-content a');
    
    [...desktopLinks, ...mobileLinks].forEach(link => {
        const href = link.getAttribute('href');
        if (href === '#' + activePageId) {
            link.classList.add('active');
        }
    });
}

// Blog post display function
function showBlogPost(postId) {
    const post = blogPosts[postId];
    if (!post) {
        console.error('Blog post not found:', postId);
        showNotification('Blog post not found', 'error');
        return;
    }

    try {
        // Update blog post content
        const titleElement = document.getElementById('blog-post-title');
        const authorElement = document.getElementById('blog-post-author');
        const dateElement = document.getElementById('blog-post-date');
        const imageElement = document.getElementById('blog-post-image');
        const contentElement = document.getElementById('blog-post-content');

        if (titleElement) titleElement.textContent = post.title;
        if (authorElement) authorElement.textContent = post.author;
        if (dateElement) dateElement.textContent = post.date;
        if (imageElement) {
            imageElement.src = post.image;
            imageElement.alt = post.title;
        }
        if (contentElement) contentElement.innerHTML = post.content;

        // Update SEO for blog post
        document.title = post.title + ' | PakBillCheck';
        const metaDesc = document.querySelector('meta[name="description"]');
        if (metaDesc) {
            metaDesc.setAttribute('content', post.description || post.title);
        }

        // Show blog post page
        showPage('blog-post');
    } catch (error) {
        console.error('Error showing blog post:', error);
        showNotification('Error loading blog post', 'error');
    }
}

// Mobile menu functions
function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const icon = document.getElementById('menu-icon');
    
    if (!menu || !icon) {
        console.error('Mobile menu elements not found');
        return;
    }
    
    const isVisible = menu.style.display === 'block';
    
    if (isVisible) {
        menu.style.display = 'none';
        icon.className = 'fas fa-bars';
    } else {
        menu.style.display = 'block';
        icon.className = 'fas fa-times';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const icon = document.getElementById('menu-icon');
    
    if (menu) menu.style.display = 'none';
    if (icon) icon.className = 'fas fa-bars';
}

// Function to redirect directly to FESCO website when input is clicked
function redirectToFESCO() {
    // Immediately redirect to FESCO bill website when input is clicked
    window.open('https://bill.pitc.com.pk/fescobill', '_blank');
    showNotification('Redirected to official FESCO bill portal', 'success');
}

// Bill checker functionality (fallback if form is submitted)
function checkBill(event) {
    event.preventDefault();
    
    const billRefInput = document.getElementById('billRef');
    if (!billRefInput) {
        console.error('Bill reference input not found');
        return;
    }
    
    const billRef = billRefInput.value.trim();
    
    // Show loading state
    const submitButton = event.target.querySelector('button[type="submit"]');
    if (submitButton) {
        submitButton.disabled = true;
        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Redirecting...';
    }
    
    try {
        // Redirect to official FESCO website
        window.open('https://bill.pitc.com.pk/fescobill', '_blank');
        
        // Show success message
        showNotification('Redirected to official FESCO bill portal', 'success');
        
        // Clear form
        billRefInput.value = '';
        
    } catch (error) {
        console.error('Error checking bill:', error);
        showNotification('Error opening FESCO website. Please try again.', 'error');
    } finally {
        // Reset button state
        if (submitButton) {
            submitButton.disabled = false;
            submitButton.innerHTML = 'Check Bill <i class="fas fa-arrow-right ml-2"></i>';
        }
    }
}

// Contact form functionality
function sendMessage(event) {
    event.preventDefault();
    
    try {
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const subject = document.getElementById('subject').value;
        const message = document.getElementById('message').value.trim();
        
        // Validate required fields
        if (!name || !email || !subject || !message) {
            showNotification('Please fill in all required fields.', 'error');
            return;
        }
        
        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            showNotification('Please enter a valid email address.', 'error');
            return;
        }
        
        // Create mailto URL with form data
        const mailtoSubject = encodeURIComponent(`[PakBillCheck] ${subject}`);
        const mailtoBody = encodeURIComponent(
            `Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`
        );
        const mailtoUrl = `mailto:bai622887@gmail.com?subject=${mailtoSubject}&body=${mailtoBody}`;
        
        // Open email client
        window.location.href = mailtoUrl;
        
        // Show success message
        showNotification('Thank you! Your email client will open with the pre-filled message. We\'ll respond within 24 hours.', 'success');
        
        // Clear form
        document.getElementById('contact-form').reset();
        
    } catch (error) {
        console.error('Error sending message:', error);
        showNotification('Error sending message. Please try again.', 'error');
    }
}

// Notification system
function showNotification(message, type = 'info') {
    // Remove existing notifications
    const existingNotifications = document.querySelectorAll('.notification');
    existingNotifications.forEach(notification => notification.remove());
    
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <span class="notification-message">${message}</span>
            <button class="notification-close" onclick="closeNotification(this)">
                <i class="fas fa-times"></i>
            </button>
        </div>
    `;
    
    // Add notification styles
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        max-width: 400px;
        padding: 1rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        animation: slideIn 0.3s ease;
        background-color: ${type === 'error' ? '#fee2e2' : type === 'success' ? '#dcfce7' : '#dbeafe'};
        border: 1px solid ${type === 'error' ? '#fecaca' : type === 'success' ? '#bbf7d0' : '#bfdbfe'};
        color: ${type === 'error' ? '#991b1b' : type === 'success' ? '#166534' : '#1e40af'};
    `;
    
    // Add to document
    document.body.appendChild(notification);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentNode) {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 300);
        }
    }, 5000);
}

function closeNotification(button) {
    const notification = button.closest('.notification');
    if (notification) {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 300);
    }
}

// Utility functions
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

// Event listeners for better UX
function addEventListeners() {
    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
        const mobileMenu = document.getElementById('mobile-menu');
        const menuButton = document.querySelector('[onclick="toggleMobileMenu()"]');
        
        if (mobileMenu && menuButton && 
            !mobileMenu.contains(event.target) && 
            !menuButton.contains(event.target) &&
            mobileMenu.style.display === 'block') {
            closeMobileMenu();
        }
    });
    
    // Handle escape key to close mobile menu
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeMobileMenu();
        }
    });
    
    // Handle hash changes in URL for direct page access
    window.addEventListener('hashchange', function() {
        const hash = window.location.hash.substring(1);
        if (hash && document.getElementById('page-' + hash)) {
            showPage(hash);
        }
    });
}

// Add CSS animations
function addAnimationStyles() {
    if (document.getElementById('notification-styles')) return;
    
    const style = document.createElement('style');
    style.id = 'notification-styles';
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .notification-close {
            background: none;
            border: none;
            cursor: pointer;
            margin-left: 1rem;
            opacity: 0.7;
            font-size: 0.875rem;
        }
        
        .notification-close:hover {
            opacity: 1;
        }
    `;
    document.head.appendChild(style);
}

// Initialize the application
function initializeApp() {
    try {
        // Load saved theme
        loadTheme();
        
        // Add animation styles
        addAnimationStyles();
        
        // Add event listeners
        addEventListeners();
        
        // Check for hash in URL and show appropriate page
        const hash = window.location.hash.substring(1);
        const initialPage = hash && document.getElementById('page-' + hash) ? hash : 'home';
        
        // Show initial page
        showPage(initialPage);
        
        console.log('PakBillCheck application initialized successfully');
        
    } catch (error) {
        console.error('Error initializing application:', error);
        showNotification('Error loading application. Please refresh the page.', 'error');
    }
}

// Run when DOM is loaded
document.addEventListener('DOMContentLoaded', initializeApp);

// Export functions for global access
window.PakBillCheck = {
    showPage,
    showBlogPost,
    toggleMobileMenu,
    closeMobileMenu,
    checkBill,
    sendMessage,
    showNotification,
    redirectToFESCO,
    toggleTheme
};